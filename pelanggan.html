<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pelanggan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1 class="my-5">Daftar Pelanggan</h1>

        <form id="addPelangganForm" class="mb-4">
            <div class="mb-3">
                <label for="nama" class="form-label">Nama Pelanggan</label>
                <input type="text" class="form-control" id="nama" required>
            </div>
            <div class="mb-3">
                <label for="jenisKelamin" class="form-label">Jenis Kelamin</label>
                <select class="form-select" id="jenisKelamin" required>
                    <option value="L">Laki-laki</option>
                    <option value="P">Perempuan</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="noHp" class="form-label">No. Handphone</label>
                <input type="text" class="form-control" id="noHp" required>
            </div>
            <div class="mb-3">
                <label for="alamat" class="form-label">Alamat</label>
                <textarea class="form-control" id="alamat" required></textarea>
            </div>
            <div class="mb-3">
                <label for="peran" class="form-label">Peran Pelanggan</label>
                <select class="form-select" id="peran" required>
                    <option value="umum">Umum</option>
                    <option value="semi">Semi</option>
                    <option value="member">Member</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Tambah Pelanggan</button>
        </form>

        <table class="table table-striped" id="pelangganTable">
            <thead>
                <tr>
                    <th scope="col">ID Pelanggan</th>
                    <th scope="col">Nama</th>
                    <th scope="col">Jenis Kelamin</th>
                    <th scope="col">No. HP</th>
                    <th scope="col">Alamat</th>
                    <th scope="col">Peran</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data pelanggan akan ditampilkan di sini -->
            </tbody>
        </table>
    </div>

    <script>
        // Function to display pelanggan data
        function displayPelanggan() {
            const pelangganTable = document.getElementById('pelangganTable').getElementsByTagName('tbody')[0];
            const pelanggan = JSON.parse(localStorage.getItem('pelanggan')) || [];

            pelangganTable.innerHTML = '';
            pelanggan.forEach(p => {
                const row = pelangganTable.insertRow();
                row.innerHTML = `
                    <td>${p.id}</td>
                    <td>${p.nama}</td>
                    <td>${p.jenisKelamin}</td>
                    <td>${p.noHp}</td>
                    <td>${p.alamat}</td>
                    <td>${p.peran}</td>
                `;
            });
        }

        // Add new pelanggan
        document.getElementById('addPelangganForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const pelanggan = JSON.parse(localStorage.getItem('pelanggan')) || [];
            const id = 'PEL' + new Date().getTime(); // ID unik berdasarkan waktu
            const newPelanggan = {
                id,
                nama: document.getElementById('nama').value,
                jenisKelamin: document.getElementById('jenisKelamin').value,
                noHp: document.getElementById('noHp').value,
                alamat: document.getElementById('alamat').value,
                peran: document.getElementById('peran').value
            };

            pelanggan.push(newPelanggan);
            localStorage.setItem('pelanggan', JSON.stringify(pelanggan));
            displayPelanggan();
            document.getElementById('addPelangganForm').reset();
        });

        // Initialize page data
        displayPelanggan();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
